"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=_interopDefault(require("react")),gsap=require("gsap"),classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},MetroHoc=function(e){return function(t){function n(){return classCallCheck(this,n),possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return inherits(n,t),createClass(n,[{key:"getLongestAnimationInSequence",value:function(e){return Math.max.apply(Math,toConsumableArray(this.props.sequence.map(function(t){return t.animation[e].time+t.animation[e].delay})))}},{key:"isThisTheLongestAnimation",value:function(e,t){var n=this.getLongestAnimationInSequence(t);return e[t].time+e[t].delay>=n}},{key:"applySequenceEndIfLastInSequence",value:function(e,t,n){var o=this.getLongestAnimationInSequence(n),i=!0;return t.forEach(function(t,r){t.animation[n].time+t.animation[n].delay===o&&r>e&&(i=!1)}),i}},{key:"componentWillEnter",value:function(e){var t=this,n=this.container;gsap.TweenMax.fromTo(n,this.props.animation.in.time,this.props.animation.willEnter.from,_extends({},this.props.animation.willEnter.to,{delay:this.props.animation.in.delay,onComplete:function(){t.isThisTheLongestAnimation(t.props.animation,"in")&&t.applySequenceEndIfLastInSequence(t.props.index,t.props.sequence,"in")&&t.props.onMount&&t.props.onMount(),e()}}))}},{key:"componentWillLeave",value:function(e){var t=this,n=this.container,o=this.getLongestAnimationInSequence("out")-(this.props.animation.out.time+this.props.animation.out.delay);gsap.TweenMax.fromTo(n,this.props.animation.out.time,this.props.animation.willLeave.from,_extends({},this.props.animation.willLeave.to,{delay:this.props.animation.out.delay,onComplete:function(){setTimeout(function(){t.isThisTheLongestAnimation(t.props.animation,"out")&&t.applySequenceEndIfLastInSequence(t.props.index,t.props.sequence,"out")&&t.props.onUnmount&&t.props.onUnmount(),e()},1e3*o)}}))}},{key:"render",value:function(){var t=this;return this.props.wrapperType?React.createElement(this.props.wrapperType,{ref:function(e){return t.container=e}},React.createElement(e,this.props)):React.createElement("div",{ref:function(e){return t.container=e}},React.createElement(e,this.props))}}]),n}(React.Component)},delayedVerticalPreset=function(e,t,n,o,i){for(var r=[],a={willEnter:{from:{opacity:0,y:50},to:{opacity:1,y:0}}},s={willLeave:{from:{opacity:1,y:0},to:{opacity:0,y:50}}},u=0;u<n;u++)r.push(_extends({in:{time:o,delay:u*i},out:{time:o,delay:u*i}},s,a));return t&&r.splice(t,0,_extends({in:{time:o,delay:0},out:{time:o,delay:0}},s,a)),r},dominoPreset=function(e,t,n,o,i){var r=t||0,a=[],s=0,u=1,l={willLeave:{from:{opacity:1,skewX:"0deg",y:0},to:{opacity:0,skewX:"-10deg",y:20}}},p={willEnter:{from:{opacity:0,skewX:"-10deg",y:20},to:{opacity:1,skewX:"0deg",y:0}}};if("multi"===e){for(var c=r,m=r;m>0;m--)a.push(_extends({in:{time:2*o,delay:i*c*2},out:{time:2*o,delay:i*c*2}},l,p)),c-=1;for(var d=r+1;d<n;d++)a.push(_extends({in:{time:2*o,delay:i*s*2},out:{time:2*o,delay:i*s*2}},l,p)),s+=1}else if("backwards"===e){for(var f=r,y=r;y>0;y--)a.push(_extends({in:{time:o,delay:i*f},out:{time:o,delay:i*f}},l,p)),f-=1;for(var h=n-1,v=n;v>r;v--)a.push(_extends({in:{time:o,delay:i*h},out:{time:o,delay:i*h}},l,p)),h-=1}else for(var g=0;g<n;g++)if(g<r){var _=g*i+(n-r)*i;a.push(_extends({in:{time:o,delay:_},out:{time:o,delay:_}},l,p))}else g>r&&(a.push(_extends({in:{time:o,delay:i*u},out:{time:o,delay:i*u}},l,p)),u+=1);return a.splice(r,0,_extends({in:{time:o,delay:0},out:{time:o,delay:0}},l,p)),a},animations={domino:dominoPreset,delayedVertical:delayedVerticalPreset},defaultAnimation={animation:{out:{time:.4,delay:0},in:{time:.4,delay:0},willEnter:{from:{opacity:0},to:{opacity:1,ease:"easeInOut"}},willLeave:{from:{opacity:1},to:{opacity:0}}}},metroSequence=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||defaultAnimation,o=e.map(function(e,o){var i=_extends({},n,{animation:_extends({},n.animation,t[o])});return _extends({},i,{content:e})});return o.map(function(e,t){return _extends({key:t,itemIndex:t},e,{sequence:o})})},metroAnimation=MetroHoc(function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"render",value:function(){var e=this;return React.createElement("div",{onClick:function(){e.props.onClick&&e.props.onClick(e.props.content,e.props.itemIndex)}},this.props.children)}}]),t}(React.Component)),generateFocusAnimationMap=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1],n=arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dominoForwards",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=(Math.ceil(n/t),.75*i/n),a=[e,n,r,r+.25*i/n];if(o.includes("domino")){var s=o.split("domino")[1].toLowerCase();return animations.domino.apply(animations,[s].concat(a))}if(o.includes("delayed")){var u=o.split("delayed")[1].toLowerCase();return animations.delayedVertical.apply(animations,[u].concat(a))}return[]},Metro={sequence:metroSequence,animation:metroAnimation,generateFocusMap:generateFocusAnimationMap};exports.default=Metro;
